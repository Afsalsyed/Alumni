<!DOCTYPE html>
<html>
<head>
    <title>Alumni Form</title>
    <style>
        .tab { display: none; }
        .tab.active { display: block; }
        .error { color: red; }
        .hidden { display: none; }
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; font-weight: bold; margin-bottom: 0.5rem; }
        .form-control { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; }
        .form-radio { margin-right: 1rem; }
        button { padding: 0.5rem 1rem; border: none; border-radius: 4px; background-color: #007BFF; color: white; cursor: pointer; }
        button[disabled] { background-color: #ccc; cursor: not-allowed; }
        .message { padding: 0.5rem; margin-bottom: 1rem; border-radius: 4px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error-message { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
    <script>
        function checkQualification() {
            var qualification = document.querySelector('input[name="educational_qualification"]:checked').value;
            var otherField = document.getElementById('other_qualification_field');
            if (qualification === 'O') {
                otherField.style.display = 'block';
            } else {
                otherField.style.display = 'none';
                otherField.querySelector('input').value = '';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            showTab(0);
            var radios = document.querySelectorAll('input[name="educational_qualification"]');
            radios.forEach(function(radio) {
                radio.addEventListener('change', checkQualification);
            });
            checkQualification();
            document.querySelectorAll('input[name="course_of_study"]').forEach(input => {
                input.addEventListener('change', function() {
                    filterYearOfStudyOptions(this.value);
                });
            });
            const selectedCourse = document.querySelector('input[name="course_of_study"]:checked');
            if (selectedCourse) {
                filterYearOfStudyOptions(selectedCourse.value);
            }
        });

        function showTab(tabIndex) {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active', index === tabIndex);
            });
        }

        function filterYearOfStudyOptions(course) {
            const ugOptions = document.querySelectorAll('#id_ug_year_of_study option');
            const pgOptions = document.querySelectorAll('#id_pg_year_of_study option');
        
            
            ugOptions.forEach(option => {
                option.style.display = 'block';
            });
        
            pgOptions.forEach(option => {
                option.style.display = 'none';
            });
        
            if (course.startsWith('PG')) {
                pgOptions.forEach(option => {
                    option.style.display = 'block';
                });
            }
        }
        

        function displayErrors(errors) {
            const errorFields = Object.keys(errors);
            errorFields.forEach(field => {
                const errorMessages = Array.isArray(errors[field]) ? errors[field].join(', ') : errors[field];
                const errorElement = document.querySelector(`[name="${field}"]`);
                if (errorElement) {
                    let errorDisplay = errorElement.closest('.form-group').querySelector('.error');
                    if (!errorDisplay) {
                        errorDisplay = document.createElement('span');
                        errorDisplay.classList.add('error');
                        errorElement.closest('.form-group').appendChild(errorDisplay);
                    }
                    errorDisplay.textContent = errorMessages;
                }
            });
        }

    </script>
</head>
<body>
    <h2>Alumni Form</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="tab active" id="personal-education">
            <h2>Personal & Education</h2>
            {% if messages %}
                {% for message in messages %}
                    <div class="message {% if message.tags %}{{ message.tags }}{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            <div class="form-group">
                {{ alumni_form.email.label_tag }}
                {{ alumni_form.email}}
                {% if alumni_form.email.errors %}
                    <div class="error">{{ alumni_form.email.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.name.label_tag }} {{ alumni_form.name }}
                {% if alumni_form.name.errors %}
                    <div class="error">{{ alumni_form.name.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.gender.label_tag }}
                {% for radio in alumni_form.gender %}
                    <label class="form-radio">{{ radio.tag }} {{ radio.choice_label }}</label>
                {% endfor %}
                {% if alumni_form.gender.errors %}
                    <div class="error">{{ alumni_form.gender.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.date_of_birth.label_tag }} {{ alumni_form.date_of_birth }}
                {% if alumni_form.date_of_birth.errors %}
                    <div class="error">{{ alumni_form.date_of_birth.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.contact_number.label_tag }} {{ alumni_form.contact_number }}
                {% if alumni_form.contact_number.errors %}
                    <div class="error">{{ alumni_form.contact_number.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.present_address.label_tag }} {{ alumni_form.present_address }}
                {% if alumni_form.present_address.errors %}
                    <div class="error">{{ alumni_form.present_address.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.permanent_address.label_tag }} {{ alumni_form.permanent_address }}
                {% if alumni_form.permanent_address.errors %}
                    <div class="error">{{ alumni_form.permanent_address.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.educational_qualification.label_tag }}
                {% for radio in alumni_form.educational_qualification %}
                    <label class="form-radio">{{ radio.tag }} {{ radio.choice_label }}</label>
                {% endfor %}
                {% if alumni_form.educational_qualification.errors %}
                    <div class="error">{{ alumni_form.educational_qualification.errors }}</div>
                {% endif %}
            </div>
            <div id="other_qualification_field" style="display: none;">
                <label for="id_other_qualification">Other Qualification:</label>
                <input type="text" name="other_qualification" id="id_other_qualification">
                {% if alumni_form.other_qualification.errors %}
                    <div class="error">{{ alumni_form.other_qualification.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.course_of_study.label_tag }}
                {% for radio in alumni_form.course_of_study %}
                    <label class="form-radio">{{ radio.tag }} {{ radio.choice_label }}</label>
                {% endfor %}
                {% if alumni_form.course_of_study.errors %}
                    <div class="error">{{ alumni_form.course_of_study.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.ug_year_of_study.label_tag }} {{ alumni_form.ug_year_of_study }}
                {% if alumni_form.ug_year_of_study.errors %}
                    <div class="error">{{ alumni_form.ug_year_of_study.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.pg_year_of_study.label_tag }} {{ alumni_form.pg_year_of_study }}
                {% if alumni_form.pg_year_of_study.errors %}
                    <div class="error">{{ alumni_form.pg_year_of_study.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.photo.label_tag }} {{ alumni_form.photo }}
                {% if alumni_form.photo.errors %}
                    <div class="error">{{ alumni_form.photo.errors }}</div>
                {% endif %}
            </div>
            <button type="button" onclick="showTab(1)">Next</button>
        </div>
        <div class="tab" id="employment">
            <h2>Employment</h2>
            <div class="form-group">
                {{ alumni_form.employment_status.label_tag }}
                {% for radio in alumni_form.employment_status %}
                    <label class="form-radio">{{ radio.tag }} {{ radio.choice_label }}</label>
                {% endfor %}
                {% if alumni_form.employment_status.errors %}
                    <div class="error">{{ alumni_form.employment_status.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.company_name.label_tag }} {{ alumni_form.company_name }}
                {% if alumni_form.company_name.errors %}
                    <div class="error">{{ alumni_form.company_name.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.current_designation.label_tag }} {{ alumni_form.current_designation }}
                {% if alumni_form.current_designation.errors %}
                    <div class="error">{{ alumni_form.current_designation.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.company_location.label_tag }} {{ alumni_form.company_location }}
                {% if alumni_form.company_location.errors %}
                    <div class="error">{{ alumni_form.company_location.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.company_address.label_tag }} {{ alumni_form.company_address }}
                {% if alumni_form.company_address.errors %}
                    <div class="error">{{ alumni_form.company_address.errors }}</div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ alumni_form.higher_study_details.label_tag }} {{ alumni_form.higher_study_details }}
                {% if alumni_form.higher_study_details.errors %}
                    <div class="error">{{ alumni_form.higher_study_details.errors }}</div>
                {% endif %}
            </div>
            <button type="button" onclick="showTab(0)">Previous</button>
            <button type="button" onclick="showTab(2)">Next</button>
        </div>
        <div class="tab" id="questionnaire">
            <h2>Questionnaire</h2>
            {% for field in questionnaire_form %}
                <div class="form-group">
                    {{ field.label_tag }}
                    {% for radio in field %}
                        <label class="form-radio">{{ radio.tag }} {{ radio.choice_label }}</label>
                    {% endfor %}
                    {% if field.errors %}
                        <div class="error">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
            <button type="button" onclick="showTab(1)">Previous</button>
            <button type="submit">Submit</button>
        </div>
    </form>
</body>
</html>